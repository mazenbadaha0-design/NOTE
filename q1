<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Our 2026 Memory Book · Q1</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- PASSWORD OVERLAY -->
  <div id="protect-overlay" class="protect-overlay">
    <div id="protect-box" class="protect-box">
      <div id="protect-title" class="protect-title">Private Memory Book</div>
      <div id="protect-subtitle" class="protect-subtitle">
        For our eyes only. Please enter our password.
      </div>
      <input
        type="password"
        id="protect-input"
        placeholder="Password"
      />
      <button id="protect-button">Enter our memories</button>
      <div id="protect-error" class="protect-error"></div>
    </div>
  </div>

  <!-- BOOK -->
  <div class="book-container" id="bookContainer">
    <div class="book-shadow"></div>
    <div class="book" id="book">

      <!-- PAGE 1: COVER -->
      <div class="page cover">
        <div class="cover-inner">
          <div class="cover-title">Our Memory Book</div>
          <div class="cover-year">2026</div>
          <div class="cover-divider"></div>
          <div class="cover-subtitle">
            12 months, 36 pages, and our favorite moments.
          </div>
          <div class="cover-names">
            Just us, and our story.
          </div>
        </div>
      </div>

      <!-- PAGE 2: INDEX (Q1 only) -->
      <div class="page">
        <div class="page-content">
          <div class="page-header">
            <span class="label">Index</span>
            <span class="value">Q1 · 2026</span>
          </div>
          <div class="page-title">Where our memories live</div>
          <div class="page-text">
            Tap a month to open its first page. No rules, just moments you want to keep.
          </div>

          <div class="months-grid">
            <button class="month-pill" onclick="goToPage(3)">January</button>
            <button class="month-pill" onclick="goToPage(6)">February</button>
            <button class="month-pill" onclick="goToPage(9)">March</button>
          </div>

          <div class="footer-note">
            Page 2 · Q1 index
          </div>
        </div>
      </div>

      <!-- ========== JANUARY · Page 1 (Page 3) ========== -->
      <div class="page">
        <div class="page-content">
          <div class="page-header">
            <div class="page-main-title">January · Page 1</div>
            <div class="page-subtitle">January 2026</div>
          </div>

          <div class="photos-grid" id="january-page-1">
            <!-- 9 boxes -->
            <!-- box 1 -->
            <div class="photo-box">
              <div class="photo-area">
                <span>Photo 1</span>
                <img alt="Preview J1-1">
                <label class="photo-upload-label">
                  Upload
                  <input class="photo-input" type="file" accept="image/*">
                </label>
              </div>
              <div class="photo-meta">
                <input type="text" placeholder="Date">
                <textarea placeholder="A few words..."></textarea>
              </div>
            </div>

            <!-- box 2 -->
            <div class="photo-box">
              <div class="photo-area">
                <span>Photo 2</span>
                <img alt="Preview J1-2">
                <label class="photo-upload-label">
                  Upload
                  <input class="photo-input" type="file" accept="image/*">
                </label>
              </div>
              <div class="photo-meta">
                <input type="text" placeholder="Date">
                <textarea placeholder="A few words..."></textarea>
              </div>
            </div>

            <!-- box 3 -->
            <div class="photo-box">
              <div class="photo-area">
                <span>Photo 3</span>
                <img alt="Preview J1-3">
                <label class="photo-upload-label">
                  Upload
                  <input class="photo-input" type="file" accept="image/*">
                </label>
              </div>
              <div class="photo-meta">
                <input type="text" placeholder="Date">
                <textarea placeholder="A few words..."></textarea>
              </div>
            </div>

            <!-- box 4 -->
            <div class="photo-box">
              <div class="photo-area">
                <span>Photo 4</span>
                <img alt="Preview J1-4">
                <label class="photo-upload-label">
                  Upload
                  <input class="photo-input" type="file" accept="image/*">
                </label>
              </div>
              <div class="photo-meta">
                <input type="text" placeholder="Date">
                <textarea placeholder="A few words..."></textarea>
              </div>
            </div>

            <!-- box 5 -->
            <div class="photo-box">
              <div class="photo-area">
                <span>Photo 5</span>
                <img alt="Preview J1-5">
                <label class="photo-upload-label">
                  Upload
                  <input class="photo-input" type="file" accept="image/*">
                </label>
              </div>
              <div class="photo-meta">
                <input type="text" placeholder="Date">
                <textarea placeholder="A few words..."></textarea>
              </div>
            </div>

            <!-- box 6 -->
            <div class="photo-box">
              <div class="photo-area">
                <span>Photo 6</span>
                <img alt="Preview J1-6">
                <label class="photo-upload-label">
                  Upload
                  <input class="photo-input" type="file" accept="image/*">
                </label>
              </div>
              <div class="photo-meta">
                <input type="text" placeholder="Date">
                <textarea placeholder="A few words..."></textarea>
              </div>
            </div>

            <!-- box 7 -->
            <div class="photo-box">
              <div class="photo-area">
                <span>Photo 7</span>
                <img alt="Preview J1-7">
                <label class="photo-upload-label">
                  Upload
                  <input class="photo-input" type="file" accept="image/*">
                </label>
              </div>
              <div class="photo-meta">
                <input type="text" placeholder="Date">
                <textarea placeholder="A few words..."></textarea>
              </div>
            </div>

            <!-- box 8 -->
            <div class="photo-box">
              <div class="photo-area">
                <span>Photo 8</span>
                <img alt="Preview J1-8">
                <label class="photo-upload-label">
                  Upload
                  <input class="photo-input" type="file" accept="image/*">
                </label>
              </div>
              <div class="photo-meta">
                <input type="text" placeholder="Date">
                <textarea placeholder="A few words..."></textarea>
              </div>
            </div>

            <!-- box 9 -->
            <div class="photo-box">
              <div class="photo-area">
                <span>Photo 9</span>
                <img alt="Preview J1-9">
                <label class="photo-upload-label">
                  Upload
                  <input class="photo-input" type="file" accept="image/*">
                </label>
              </div>
              <div class="photo-meta">
                <input type="text" placeholder="Date">
                <textarea placeholder="A few words..."></textarea>
              </div>
            </div>
          </div>

          <div class="page-save-wrap">
            <button class="page-save-button" onclick="savePage('january-page-1')">Save</button>
          </div>

          <div class="footer-note">
            Page 3 · January
          </div>
        </div>
      </div>

      <!-- ========== JANUARY · Page 2 (Page 4) ========== -->
      <div class="page">
        <div class="page-content">
          <div class="page-header">
            <div class="page-main-title">January · Page 2</div>
            <div class="page-subtitle">January 2026</div>
          </div>

          <div class="photos-grid" id="january-page-2">
            <!-- كرر نفس 9 بوكس من فوق بالظبط -->
          </div>

          <div class="page-save-wrap">
            <button class="page-save-button" onclick="savePage('january-page-2')">Save</button>
          </div>

          <div class="footer-note">
            Page 4 · January
          </div>
        </div>
      </div>

      <!-- ========== JANUARY · Page 3 (Page 5) ========== -->
      <div class="page">
        <div class="page-content">
          <div class="page-header">
            <div class="page-main-title">January · Page 3</div>
            <div class="page-subtitle">January 2026</div>
          </div>

          <div class="photos-grid" id="january-page-3">
            <!-- كرر نفس 9 بوكس -->
          </div>

          <div class="page-save-wrap">
            <button class="page-save-button" onclick="savePage('january-page-3')">Save</button>
          </div>

          <div class="footer-note">
            Page 5 · January
          </div>
        </div>
      </div>

      <!-- ========== FEBRUARY · Pages 1–3 (Pages 6–8) ========== -->
      <!-- نفس النمط، ids: february-page-1 / 2 / 3 -->
      <!-- ========== MARCH · Pages 1–3 (Pages 9–11) ========== -->
      <!-- نفس النمط، ids: march-page-1 / 2 / 3 -->

    </div> <!-- /book -->

    <!-- CONTROLS -->
    <div class="controls">
      <button id="prevBtn" class="btn">Previous</button>
      <button id="indexBtn" class="btn">Back to index</button>
      <button id="nextBtn" class="btn">Next</button>
    </div>
    <div id="pageIndicator" class="page-indicator"></div>
  </div> <!-- /book-container -->

  <!-- SCRIPT: PASSWORD + FLIPBOOK + FIREBASE LOAD/SAVE -->
  <script>
    // PASSWORD LOGIC
    const CORRECT_PASSWORD = "2026love";

    const overlay       = document.getElementById('protect-overlay');
    const protectInput  = document.getElementById('protect-input');
    const protectButton = document.getElementById('protect-button');
    const protectError  = document.getElementById('protect-error');

    const alreadyUnlocked = localStorage.getItem('q1_unlocked') === 'true';
    if (alreadyUnlocked) {
      overlay.style.display = 'none';
      document.getElementById('bookContainer').style.display = 'flex';
    }

    protectButton.addEventListener('click', () => {
      const val = protectInput.value.trim();
      if (val === CORRECT_PASSWORD) {
        localStorage.setItem('q1_unlocked', 'true');
        overlay.style.display = 'none';
        document.getElementById('bookContainer').style.display = 'flex';
        protectError.textContent = '';
      } else {
        protectError.textContent = "Wrong password, try again.";
      }
    });

    protectInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        protectButton.click();
      }
    });

    // FLIPBOOK
    const pages       = Array.from(document.querySelectorAll('.book .page'));
    const nextBtn     = document.getElementById('nextBtn');
    const prevBtn     = document.getElementById('prevBtn');
    const indexBtn    = document.getElementById('indexBtn');
    const pageIndicator = document.getElementById('pageIndicator');
    let currentPage   = 1;

    function showPage(pageNumber) {
      currentPage = Math.min(Math.max(pageNumber, 1), pages.length);
      pages.forEach((page, index) => {
        const p = index + 1;
        if (p < currentPage) {
          page.classList.add('flipped');
        } else {
          page.classList.remove('flipped');
        }
      });
      updateButtons();
    }

    function updateButtons() {
      pageIndicator.textContent = `Page ${currentPage} of ${pages.length}`;
      prevBtn.disabled = currentPage === 1;
      nextBtn.disabled = currentPage === pages.length;
    }

    function goToPage(p) {
      showPage(p);
    }
    window.goToPage = goToPage;

    nextBtn.addEventListener('click', () => {
      if (currentPage < pages.length) {
        showPage(currentPage + 1);
      }
    });

    prevBtn.addEventListener('click', () => {
      if (currentPage > 1) {
        showPage(currentPage - 1);
      }
    });

    indexBtn.addEventListener('click', () => {
      showPage(2);
    });

    showPage(1);
  </script>

  <!-- هنا نحط سكربت Firebase (نفس اللي في index) مع دوال savePage / loadPage -->
  <!-- مهم: يظل يستخدم نفس ids: january-page-1, february-page-1, ... -->

</body>
</html>
